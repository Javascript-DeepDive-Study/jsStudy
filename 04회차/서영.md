## 🧩 13장 스코프
### 스코프
식별자가 유효한 범위

모든 식별자(변수/함수/클래스 이름 등)는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.

### 스코프 종류
#### 전역
- 코드의 가장 바깥 영역
- 전역 스코프
- 전역 변수
- 어디서든지 참조할 수 있다.

#### 지역
- 함수 몸체 내부
- 지역 스코프
- 지역 변수
- 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.

### 스코프 체인
스코프가 계층적으로 연결된 것

모든 스코프는 하나의 계층적 구조로 연결되며, 모든 지역 스코프의 최상위 스코프는 전역 스코프이다.

변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여
상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.

### 함수 레벨 스코프
var 키워드로 선언된 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정한다.
```javascript
var x = 1;
if (true) {
    var x = 10;
}
console.log(x); //10
```
- 함수 밖에서 var 키워드로 선언된 변수는 코드 블록 내에서 선언되었다 할지라도 모두 전역 변수다.
- 전역변수 x는 중복 선언되고 의도치 않은 전역 변수 값이 재할당됨

### 렉시컬 스코프
함수를 어디에서 정의했는지에 따라 상위 스코프를 결정한다.


## 🧩 14장 전역 변수의 문제점
### 변수의 생명 주기
#### 지역 변수의 생명 주기
지역 변수의 생명 주기는 함수의 생명 주기와 일치한다.

#### 전역 변수의 생명 주기
var 키워드로 선언한 전역 변수의 생명 주기는 전역 객체의 생명주기와 일치한다.

### 전역 변수의 문제점
1. 암묵적 결합: 모든 코드가 전역 변수를 참조하고 변경할 수 있다.
2. 긴 생명 주기
3. 스코프 체인 상에서 종점에 존재
4. 네임스페이스 오염

### 전역 변수의 사용을 억제하는 방법
전역 변수를 반드시 사용해야 할 이유를 찾지 못한다면 지역 변수를 사용해야 한다.
1. 즉시 실행 함수
2. 네임스페이스 객체
3. 모듈패턴
4. ES6 모듈


## 🧩 15장 let, const 키워드와 블록 레벨 스코프

### var 키워드로 선언한 변수의 문제점
#### 변수 중복 선언 허용
```javascript
var x = 1;
var y = 1;

var x = 100;
//초기화문이 없는 변수 선언문은 무시된다.
var y = 1;

console.log(x); //100
console.log(y); //1
```
#### 함수 레벨 스코프
```javascript
var i = 10;

for (var i=0; i<5; i++) {
    console.log(i);
}

console.log(i); //5
```
#### 변수 호이스팅
```javascript
// 호이스팅에 의해 이미 선언됨, undefined로 초기화
console.log(foo); //undefined

foo = 123;
console.log(foo); //123

// 변수 선언은 런타임 이전에
var foo;
```


### let 키워드
#### 변수 중복 선언 금지
```javascript
let bar = 123;
let bar = 456; // SyntaxError 발생
```
#### 블록 레벨 스코프
```javascript
let foo = 1;
{
    let foo = 2;
    let bar = 3;
}
console.log(foo); //1
console.log(bar); //ReferenceError 발생
```
#### 변수 호이스팅
let 키워드로 선언한 변수는 선언 단계와 초기화 단계라 분리되어 진행된다.

```javascript
// 초기화 이전의 일시적 사각지대에서는 변수를 참조할 수 없다
console.log(foo); //ReferenceError 발생

let foo;
console.log(foo); // undefined

foo = 1;
console.log(foo); //1
```
- 일시적 사각지대: 스코프의 시작 시점부터 초기화 시작 지점까지 변수를 참조할 수 없는 구간

- 변수 호이스팅이 발생하지 않는 것처럼 보이지만 발생한다.
```javascript
let foo = 1;
{
    console.log(foo); //ReferenceError 발생
    let foo = 2;
}
```
- 변수 호이스팅이 발생하지 않는다면 전역 변수 foo의 값을 출력해야한다.

#### 전역 객체와 let
let 키워드로 선언한 전역변수는 전역 객체의 프로퍼티가 아니다.



### const 키워드
#### 선언과 초기화
const 키워드로 선언한 변수는 반드시 선언과 동시에 초기화해야 한다.
```javascript
const foo; // SyntaxError
```
#### 재할당 금지
const 키워드로 선언한 변수는 재할당이 금지된다.
#### 상수
```javascript
const TAX_RATE = 0.1;
```
#### const 키워드와 객체
const 키워드로 선언된 변수에 객체를 할당한 경우 값을 변경할 수 있다.
```javascript
const person = {
    name : 'Lee'
};

person.name = 'Kim';

console.log(person);
```


### 권장
- ES6를 사용한다면 var 키워드는 사용하지 않는다
- 재할당이 필요한 경우에 한정해 let 키워드를 사용한다
- 변경이 발행하지 않고 읽기 전용으로 사용하는 원시 값과 객체에는 const 키워드를 사용한다.
